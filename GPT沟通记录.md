# pdtTestTool

## GPT沟通记录


我想用python写一个通过串口通讯的生产测试软件，功能如下：
1. 串口配置：用户可以配置串口号、波特率
2. 有GUI界面，使用tkinter库
3. 通过按钮发送JSON格式的指令：预设特定json格式的指令，用户可以点击按钮发送
4. 发送JSON指令后，收到返回值并做判断，并显示结果
例如发送`{"PdtTest": "enter"}`
如果收到`{"item": "PdtTest","result": "enter"}`, 则显示成功，否则显示失败。

有几个地方需要修改
1. 串口号和波特率更改为combobox供用户选择而不是手动填写
2. 串口号开启软件时自动检测
3. 新增一个刷新串口的按钮
4. 连接按钮点击后变为断开连接按钮，再点击恢复连接
5. 增加日志系统，记录发送和接收的指令和返回值

序号	描述	发送值	返回值
1	进入生产测试模式	{"PdtTest": "enter"}	"{
    ""item"": ""PdtTest"",
    ""result"": ""enter""
}"
2	I2C数据收集	{"PdtTest": "I2C"}	"{
    ""item"": ""nca9555"",
    ""result"": {
        ""nca9555_key"": ""8FC0"",
        ""nca9555_io1"": ""FFFF"",
        ""nca9555_io2"": ""FFFF"",
        ""nca9555_io3"": ""7FFF""
    }
}"
3	ADC数据测试	{"PdtTest": "ADC"}	"{
    ""item"": ""ADC"",
    ""result"": {
        ""adc_chan0"": 1326,
        ""adc_chan1"": 1057,
        ""adc_chan2"": 1246,
        ""adc_chan3"": 1271,
        ""bat_chan"": 3916
    }
}"
4	查询软件版本	{"PdtTest": "softver"}	"{
    ""item"": ""softver"",
    ""result"":""v06.18""
}"
5	无线功能测试	{"PdtTest": "radio"}	"{
    ""item"": ""radio"",
    ""result"": ""ok""
}"
6	引脚映射表配置	"{""pinMappingConfig"":{""mapping"":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47]}}
"	"{
    ""item"": ""pinMappingConfig"",
    ""result"": ""ok""
}"
7	查询设备UID	{"PdtTest": "uid"}	"{
    ""item"": ""uid"",
    ""result"": [
        ""37"",
        ""32"",
        ""48"",
        ""5B""
    ]
}"
8	退出生产测试模式	{"PdtTest": "exit"}	"{
    ""item"": ""PdtTest"",
    ""result"": ""exit""
}"
以上是完整的测试表格，请按照这个表格将软件补充完整，接受到回复后将result后面的值显示到界面上

---
可以将测试项目序号，测试项目名称，测试结果，开始测试放在一个表格中吗？当点击开始测试后，则会发送当前行的测试项目，并将接受到的结果显示在当前行的测试结果列中

---
1. json格式的内容有回车，内容无法在一行内显示，需要将回车换位空格
2. 现在窗口是固定大小，全屏化后表格没有发生对应的改变，请更改为自适应窗口大小
3. 增加一个测试结果清空按钮，单击后，清空测试结果列